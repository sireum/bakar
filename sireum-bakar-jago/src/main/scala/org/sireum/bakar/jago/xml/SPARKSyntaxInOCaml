type mode = 
    | In
    | Out

type typ = 
    | Tint
    | Tbool

type idnum = int

type astnum = int

type procnum = int

type typenum = int

type typeuri = string

type type_table = {
    tt_ast_table: (int * int) list;
    tt_typeuri_table: (int * (string * int option)) list
}

type location = 
    | Loc of (int * int) * (int * int)

type value = 
    | Aval of int
    | Bval of bool

type constant = 
	int

type unary_operation = 
	| Onegint 
	| Oposint 

type binary_operation = 
	| Ceq 
	| Cge 
	| Cgt 
	| Cle 
	| Clt 
	| Cne 
	| Oadd 
	| Oand 
	| Odiv 
	| Omul 
	| Oor 
	| Osub 
	| Oxor 

type expr = 
	| Econst of astnum * constant
	| Evar of astnum * idnum
	| Ebinop of astnum * binary_operation * expr * expr
	| Eunop of astnum * unary_operation * expr

type predicate = expr

type loopInvariant = (predicate) option

type stmt = 
	| Sassign of astnum * idnum * expr
	| Sifthen of astnum * expr * stmt
	| Swhile of astnum * expr * loopInvariant * stmt
	| Sseq of astnum * stmt * stmt

type param = {
	param_astnum: astnum;
	param_ident: idnum;
	param_mode: mode;
	param_init: (expr) option 
}

type subprog_aspect_specs = {
	specs_astnum: astnum;
	pre: (predicate) option;
	post: (predicate) option 
}

(* Local variables declarations used in the procedure/function body *)
type local_ident = {
	local_astnum: astnum;
	local_idents: idnum list;
	local_init: (value) option 
}

type procedure_body = {
	proc_astnum: astnum;
	proc_name: procnum;
	proc_specs: (subprog_aspect_specs) option;
	proc_params: (param list) option;
	proc_loc_idents: (local_ident list) option;
	proc_body: stmt 
}

type function_body = {
	fn_astnum: astnum;
	fn_name: procnum;
	fn_specs: (subprog_aspect_specs) option;
	fn_ret_type: typ;
	fn_params: (param list) option;
	fn_loc_idents: (local_ident list) option;
	fn_body: stmt 
}

type subprogram = 
	| Sproc of astnum * procedure_body
	| Sfunc of astnum * function_body

type pkgbody_aspect_specs = subprog_aspect_specs

type package_body = 
	| Packagebody of astnum * procnum * (pkgbody_aspect_specs) option * subprogram list

(* compilation unit can be either package_declaration or package_body_declaration *)
type compilation_unit = 
	| PkgBodyDecl of astnum * procnum * package_body * type_table